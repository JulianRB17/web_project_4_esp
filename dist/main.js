!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{l:function(){return ee}});var n=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=n}var n,r;return n=e,(r=[{key:"renderItem",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameValue=t,this._linkValue=n,this._card=r.querySelector(".cards__card-container"),ee._handleCardClick()}var t,o;return t=e,(o=[{key:"addCard",value:function(){var e=new n({items:[this._newCard],renderer:function(){this._newCard=this._card.cloneNode(!0),this._newCard.querySelector(".cards__name").textContent=this._nameValue,this._newCard.querySelector(".cards__img").alt=this._nameValue,this._newCard.querySelector(".cards__img").src=this._linkValue,this._toggleLikeBtn(this._newCard),this._eraseCard(this._newCard)}.bind(this)},document.querySelector(".cards"));return e.renderItem(),e.addItem(this._newCard)}},{key:"_toggleLikeBtn",value:function(){this._newCard.querySelector(".cards__like-btn").addEventListener("click",(function(e){e.target.classList.toggle("cards__like-btn_active")}))}},{key:"_eraseCard",value:function(){this._newCard.querySelector(".cards__trash-btn").addEventListener("click",(function(e){return e.target.closest(".cards__card-container").remove()}))}}])&&r(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupWindow=t}var t,n;return t=e,(n=[{key:"_openPopup",value:function(){this._popupWindow.classList.add("popup_opened"),this._handleEscClose()}},{key:"_closePopup",value:function(){this._popupWindow.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function t(n){"Escape"===n.key&&(e._popupWindow.classList.remove("popup_opened"),document.removeEventListener("keydown",t))}))}},{key:"_setEventListeners",value:function(){var e=this;this._popupWindow.querySelector(".popup__close-btn").addEventListener("click",(function(){e._closePopup()})),this._popupWindow.querySelector(".popup__overlay").addEventListener("click",(function(){e._closePopup()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=document.querySelector("#popup-pic"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function u(){var e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),f((e=s(t=i.call(this,_)),y(u.prototype)),"_setEventListeners",e).call(e),t}return t=u,(n=[{key:"_handleCardClick",value:function(){var e=this;document.querySelector(".cards").addEventListener("click",(function(t){var n=t.target.closest(".cards__img");n&&(f(y(u.prototype),"_openPopup",e).call(e),_.querySelector(".popup__pic").src=n.src,_.querySelector(".popup__pic").alt=n.alt,_.querySelector(".popup__pic-name").textContent=n.alt)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(u);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function w(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,g(e,t,"get"))}function m(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,g(e,t,"set"),n),n}function g(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var k=new WeakMap,S=new WeakMap,P=new WeakMap,E=new WeakMap,O=new WeakMap,j=new WeakMap,q=new WeakMap,C=new WeakMap,I=new WeakMap,L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,k,{writable:!0,value:void 0}),b(this,S,{writable:!0,value:void 0}),b(this,P,{writable:!0,value:void 0}),b(this,E,{writable:!0,value:void 0}),b(this,O,{writable:!0,value:void 0}),b(this,j,{writable:!0,value:void 0}),b(this,q,{writable:!0,value:void 0}),b(this,C,{writable:!0,value:void 0}),b(this,I,{writable:!0,value:void 0}),m(this,k,n),m(this,S,t.formSelector),m(this,P,t.inputSelector),m(this,E,t.submitButtonSelector),m(this,O,t.inactiveButtonClass),m(this,j,t.errorClass),m(this,q,w(this,k).querySelector(w(this,S))),m(this,C,Array.from(w(this,k).querySelectorAll(w(this,P)))),m(this,I,w(this,k).querySelector(w(this,E))),this._enableValidation()}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=w(this,k).querySelector("#".concat(e.id,"-error"));w(this,k).querySelector("#".concat(e.id,"-underline")).classList.add("popup__input-underline_error"),t.textContent=e.validationMessage,t.classList.add(w(this,j))}},{key:"_hideInputError",value:function(e){var t=w(this,k).querySelector("#".concat(e.id,"-error"));w(this,k).querySelector("#".concat(e.id,"-underline")).classList.remove("popup__input-underline_error"),t.textContent="",t.classList.remove(w(this,j))}},{key:"_hasInvalidInput",value:function(){return w(this,C).some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleSaveButtonState",value:function(){this._hasInvalidInput(w(this,C))?(w(this,I).classList.add(w(this,O)),w(this,I).setAttribute("disabled","")):(w(this,I).classList.remove(w(this,O)),w(this,I).removeAttribute("disabled",""))}},{key:"_setEventListeners",value:function(){var e=this;w(this,C).forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSaveButtonState()}))}))}},{key:"_enableValidation",value:function(){w(this,q).addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;w(this,C).forEach((function(t){e._hideInputError(t)})),this._toggleSaveButtonState()}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.userName,r=t.userJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userJob=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName,job:this._userJob}}},{key:"setUserInfo",value:function(){var e=document.querySelector("#popup__input_name"),t=document.querySelector("#popup__input_about-me");e.value=this._userName,t.value=this._userJob}}])&&W(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=V(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function V(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function x(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function D(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function U(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,F(e,t,"get"))}function z(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,F(e,t,"set"),n),n}function F(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var G=document.querySelector("#cards__template").content,H=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(a,e);var t,n,r,i,u=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(i){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),D(A(t=u.call(this,e)),H,{writable:!0,value:void 0}),D(A(t),K,{writable:!0,value:new T({userName:"Jacques Cousteau",userJob:"Explorador"})}),D(A(t),Q,{writable:!0,value:void 0}),D(A(t),X,{writable:!0,value:document.querySelector("#edit-profile")}),D(A(t),Y,{writable:!0,value:document.querySelector("#new-place")}),D(A(t),Z,{writable:!0,value:document.querySelector("#profile-pic")}),t._setEventListeners(),z(A(t),H,new L({formSelector:".popup__input-container",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_inactive",errorClass:"popup__input-error_active"},t._popupWindow)),t}return t=a,(n=[{key:"openPopup",value:function(){B(J(a.prototype),"_openPopup",this).call(this),U(this,H).resetValidation(),U(this,K).setUserInfo()}},{key:"_getInputValues",value:function(){this._popupWindow===U(this,X)&&(this._popupInputName=document.querySelector("#popup__input_name").value,this._popupInputAboutMe=document.querySelector("#popup__input_about-me").value,z(this,K,new T({userName:this._popupInputName,userJob:this._popupInputAboutMe}))),this._popupWindow===U(this,Y)&&(this._popupInputNewPlacePic=document.querySelector("#popup__input_new-place-pic").value,this._popupInputnewPlaceTitle=document.querySelector("#popup__input_new-place-title").value),this._popupWindow===U(this,Z)&&(this._popupInputProfilePic=document.querySelector("#popup__input_profile-pic").value,this._popupInputProfilePicDescription=document.querySelector("#popup__input_profile-pic-description").value)}},{key:"_setEventListeners",value:function(){var e=this;this._popupWindow.addEventListener("submit",(function(t){if(e._getInputValues(),e._closePopup(),e._popupWindow===U(e,Y)&&(z(e,Q,new o(e._popupInputnewPlaceTitle,e._popupInputNewPlacePic,G)),U(e,Q).addCard()),e._popupWindow===U(e,X)){var n=document.querySelector(".profile__name"),r=document.querySelector(".profile__about-me");n.textContent=U(e,K)._userName,r.textContent=U(e,K)._userJob}if(e._popupWindow===U(e,Z)){var i=document.querySelector(".profile__pic");i.style.backgroundImage="url(".concat(e._popupInputProfilePic,")"),i.setAttribute("alt","".concat(e._popupInputProfilePicDescription))}})),B(J(a.prototype),"_setEventListeners",this).call(this)}},{key:"_closePopup",value:function(){B(J(a.prototype),"_closePopup",this).call(this),this._popupWindow!==U(this,X)&&this._popupWindow.querySelectorAll(".popup__input").forEach((function(e){e.value=""}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u),ee=new h,te=new $(document.querySelector("#new-place")),ne=new $(document.querySelector("#profile-pic")),re=new $(document.querySelector("#edit-profile"));document.querySelector(".profile__edit-btn").addEventListener("click",(function(e){re.openPopup()})),document.querySelector(".profile__add-btn").addEventListener("click",(function(e){te.openPopup()})),document.querySelector(".profile__pic").addEventListener("click",(function(e){ne.openPopup()})),[{name:"Cenotes",link:"./images/cards_1.jpg"},{name:"Ushuaia",link:"./images/cards_2.jpeg"},{name:"IguazÃº",link:"./images/cards_3.jpeg"},{name:"Uyuni",link:"./images/cards_4.jpg"},{name:"Bacalar",link:"./images/cards_5.webp"},{name:"Las Coloradas",link:"./images/cards_6.jpg"}].forEach((function(e){new o(e.name,e.link,G).addCard()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFDTjJCLEtBQU0seUJBRVIsQ0FDRTNCLEtBQU0sZ0JBQ04yQixLQUFNLHlCQTBCRzFHLFNBQVEsU0FBVTJHLEdBQ2hCLElBQUl4RyxFQUFLd0csRUFBWTVCLEtBQU00QixFQUFZRCxLQUFNdEIsR0FDckRZLFNBQ04sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIC8vIHJlbmRlcml6YSBlbGVtZW50b3MgZGUgdW4gYXJyYXlcclxuICByZW5kZXJJdGVtKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWdyZWdhIGVsZW1lbnRvIGFsIERPTVxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL3NyYy9pbmRleC5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vU2VjdGlvbi5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVWYWx1ZSwgbGlua1ZhbHVlLCB0ZW1wbGF0ZSkge1xyXG4gICAgdGhpcy5fbmFtZVZhbHVlID0gbmFtZVZhbHVlO1xyXG4gICAgdGhpcy5fbGlua1ZhbHVlID0gbGlua1ZhbHVlO1xyXG4gICAgdGhpcy5fY2FyZCA9IHRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NhcmQtY29udGFpbmVyXCIpO1xyXG4gICAgcG9wdXBXaXRoSW1hZ2UuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWdyZWdhciBjYXJ0YSBkZSBudWV2byBsdWdhclxyXG4gIGFkZENhcmQoKSB7XHJcbiAgICBjb25zdCBuZXdDYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IFt0aGlzLl9uZXdDYXJkXSxcclxuICAgICAgICByZW5kZXJlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdGhpcy5fbmV3Q2FyZCA9IHRoaXMuX2NhcmQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19uYW1lXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgICAgICAgdGhpcy5fbmFtZVZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWdcIikuYWx0ID0gdGhpcy5fbmFtZVZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWdcIikuc3JjID0gdGhpcy5fbGlua1ZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlTGlrZUJ0bih0aGlzLl9uZXdDYXJkKTtcclxuICAgICAgICAgIHRoaXMuX2VyYXNlQ2FyZCh0aGlzLl9uZXdDYXJkKTtcclxuICAgICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgIH0sXHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIilcclxuICAgICk7XHJcblxyXG4gICAgbmV3Q2FyZFNlY3Rpb24ucmVuZGVySXRlbSgpO1xyXG5cclxuICAgIHJldHVybiBuZXdDYXJkU2VjdGlvbi5hZGRJdGVtKHRoaXMuX25ld0NhcmQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2VCdG4oKSB7XHJcbiAgICB0aGlzLl9uZXdDYXJkXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChsaWtlQnV0dG9uKSA9PiB7XHJcbiAgICAgICAgbGlrZUJ1dHRvbi50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRzX19saWtlLWJ0bl9hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2VyYXNlQ2FyZCgpIHtcclxuICAgIHRoaXMuX25ld0NhcmRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RyYXNoLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh0cmFzaEJ0bikgPT5cclxuICAgICAgICB0cmFzaEJ0bi50YXJnZXQuY2xvc2VzdChcIi5jYXJkc19fY2FyZC1jb250YWluZXJcIikucmVtb3ZlKClcclxuICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiLy8gQ2xhc2UgcGFkcmUgZGUgbGFzIHZlbnRhbmFzIHBvcHVwZXNcclxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFdpbmRvdykge1xyXG4gICAgdGhpcy5fcG9wdXBXaW5kb3cgPSBwb3B1cFdpbmRvdztcclxuICB9XHJcblxyXG4gIC8vQWJyaXIgdmVudGFuYSBwb3B1cCB5IGFncmVnYXIgZXZlbnRMaXN0ZW5lciBwYXJhIGNlcnJhciBjb24gZXNjYXBlLlxyXG4gIF9vcGVuUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICB9XHJcblxyXG4gIC8vQ2VycmFyIHZlbnRhbmFzIHBvcHVwZXNcclxuICBfY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoKSB7XHJcbiAgICBjb25zdCBlc2NhcGVDbG9zZVBvcHVwID0gKGUpID0+IHtcclxuICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlc2NhcGVDbG9zZVBvcHVwKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGVzY2FwZUNsb3NlUG9wdXApO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBXaW5kb3dcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jbG9zZVBvcHVwKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBXaW5kb3dcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX292ZXJsYXlcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGhpcy5fY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBTYWx2YXIgZGF0b3MgZW4gdmVudGFuYSBwb3B1cFxyXG4gIC8vIF9zYXZlQW5kQ2xvc2VQb3B1cChzYXZlRnVuY3Rpb24pIHtcclxuICAvLyAgIGNvbnN0IHNhdmVBbmRDbG9zZSA9ICgpID0+IHtcclxuICAvLyAgICAgc2F2ZUZ1bmN0aW9uKCk7XHJcbiAgLy8gICAgIHRoaXMuX2Nsb3NlUG9wdXAoKTtcclxuICAvLyAgIH07XHJcblxyXG4gIC8vICAgdGhpcy5fcG9wdXBXaW5kb3dcclxuICAvLyAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnRuXCIpXHJcbiAgLy8gICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIC8vICAgICAgIHNhdmVBbmRDbG9zZSgpO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5jb25zdCBwb3B1cFBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtcGljXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIocG9wdXBQaWMpO1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvLyBBZ3JlZ2EgZWwgZXZlbnRMaXN0ZW5lciBwYXJhIGFicmlyIGxhIHBvcHVwIGRlIGltYWdlblxyXG4gIF9oYW5kbGVDYXJkQ2xpY2soKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBjb25zdCBpbWcgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmNhcmRzX19pbWdcIik7XHJcbiAgICAgIGlmICghaW1nKSByZXR1cm47XHJcbiAgICAgIHN1cGVyLl9vcGVuUG9wdXAoKTtcclxuICAgICAgcG9wdXBQaWMucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGljXCIpLnNyYyA9IGltZy5zcmM7XHJcbiAgICAgIHBvcHVwUGljLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3BpY1wiKS5hbHQgPSBpbWcuYWx0O1xyXG4gICAgICBwb3B1cFBpYy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waWMtbmFtZVwiKS50ZXh0Q29udGVudCA9IGltZy5hbHQ7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICNwb3B1cFdpbmRvdztcclxuICAjZm9ybVNlbGVjdG9yO1xyXG4gICNpbnB1dFNlbGVjdG9yO1xyXG4gICNzdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAjaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAjZXJyb3JDbGFzcztcclxuICAjZm9ybUVsZW1lbnQ7XHJcbiAgI2lucHV0TGlzdDtcclxuICAjYnV0dG9uRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29uZmlnT2JqLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy4jcG9wdXBXaW5kb3cgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuI2Zvcm1TZWxlY3RvciA9IGNvbmZpZ09iai5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLiNpbnB1dFNlbGVjdG9yID0gY29uZmlnT2JqLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLiNzdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZ09iai5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWdPYmouaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuI2Vycm9yQ2xhc3MgPSBjb25maWdPYmouZXJyb3JDbGFzcztcclxuXHJcbiAgICAvLyBTZWxlY3RvcmVzIGRlIGZvcm0gZWxlbWVudCwgbGlzdGEgZGUgaW5wdXRzIHkgYm90w7NuIGRlIHN1Ym1pdC5cclxuXHJcbiAgICB0aGlzLiNmb3JtRWxlbWVudCA9IHRoaXMuI3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IodGhpcy4jZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuI2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuI3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy4jaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLiNidXR0b25FbGVtZW50ID0gdGhpcy4jcG9wdXBXaW5kb3cucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgLy9Nb3N0cmFyIG1lbnNhamUgZGUgZXJyb3JcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLiNwb3B1cFdpbmRvdy5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICB0aGlzLiNwb3B1cFdpbmRvd1xyXG4gICAgICAucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS11bmRlcmxpbmVgKVxyXG4gICAgICAuY2xhc3NMaXN0LmFkZChcInBvcHVwX19pbnB1dC11bmRlcmxpbmVfZXJyb3JcIik7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNlcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8vT2N1bHRhciBtZW5zYWplIGRlIGVycm9yXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jcG9wdXBXaW5kb3cucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgdGhpcy4jcG9wdXBXaW5kb3dcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tdW5kZXJsaW5lYClcclxuICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9faW5wdXQtdW5kZXJsaW5lX2Vycm9yXCIpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGV0ZXJtaW5hciBzaSB1biBlbGVtZW50byBpbnB1dCBkZWwgZm9ybSBubyBlcyB2w6FsaWRvXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLiNpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL1ZlcmlmaWNhciB2YWxpZGV6IGRlIGRhdG9zIGVuIGlucHV0IHBhcmEgbW9zdHJhciBlcnJvclxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vTW9kaWZpY2FyIGJvdMOzbiBkZXBlbmRpZW5kbyBkZSB2YWxpZGV6IGRlIGZvcm1cclxuICBfdG9nZ2xlU2F2ZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLiNpbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuI2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy4jYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuI2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy4jYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vU2VsZWNjaW9uYXIgZm9ybSB5IGxsYW1hciBhIGxhIG1vZGlmaWNhY2nDs24gZGVsIGJvdMOzbiwgYWdyZWdhIHVuIGV2ZW50IGxpc3RlbmVyIGEgY2FkYSBhY2Npw7NuIGRlIFwiaW5wdXRcIiB5IGEgcGFydGlyIGRlIGxhIHZhbGlkZXogbGxhbWEgYSBtb2RpZmljYXIgZWwgYm90w7NuLlxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlU2F2ZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL0RldG9uYSBsYSB2YWxpZGFjacOzbiBlbiBjYWRhIGZvcm1cclxuICBfZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuI2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vUmVzdGFibGVjZSBsYSB2YWxpZGFjacOzbiBkZSBmb3JtdWxhcmlvc1xyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuI2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlU2F2ZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XHJcbiAgfVxyXG4gIC8vIEFsbWFjZW5hIGxvcyBkYXRvcyBkZSBsYSBwb3B1cCBkZSBlZGljacOzbiBkZSBwZXJmaWxcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX3VzZXJOYW1lLCBqb2I6IHRoaXMuX3VzZXJKb2IgfTtcclxuICB9XHJcblxyXG4gIC8vIENvbG9jYSBsb3MgZGF0b3MgZGUgZWRpY2nDs24gZGUgcGVyZmlsIGVuIGxhIHBvcHVwIHJlc3BlY3RpdmEgY3VhbmRvIHNlIGFicmVcclxuICBzZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IGlucHV0UHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19pbnB1dF9uYW1lXCIpO1xyXG4gICAgY29uc3QgaW5wdXRQcm9maWxlQWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI3BvcHVwX19pbnB1dF9hYm91dC1tZVwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRQcm9maWxlTmFtZS52YWx1ZSA9IHRoaXMuX3VzZXJOYW1lO1xyXG4gICAgaW5wdXRQcm9maWxlQWJvdXRNZS52YWx1ZSA9IHRoaXMuX3VzZXJKb2I7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vQ2FyZC5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzX190ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm1zIGV4dGVuZHMgUG9wdXAge1xyXG4gICNmb3JtVmFsaWRhdG9yO1xyXG4gICN1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB1c2VyTmFtZTogXCJKYWNxdWVzIENvdXN0ZWF1XCIsXHJcbiAgICB1c2VySm9iOiBcIkV4cGxvcmFkb3JcIixcclxuICB9KTtcclxuICAjY2FyZDtcclxuXHJcbiAgI3BvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlXCIpO1xyXG4gICNwb3B1cE5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcGxhY2VcIik7XHJcbiAgI3BvcHVwUHJvZmlsZVBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWNcIik7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwV2luZG93KSB7XHJcbiAgICBzdXBlcihwb3B1cFdpbmRvdyk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy4jZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAgICB7XHJcbiAgICAgICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtY29udGFpbmVyXCIsXHJcbiAgICAgICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ0blwiLFxyXG4gICAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnRuX2luYWN0aXZlXCIsXHJcbiAgICAgICAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRoaXMuX3BvcHVwV2luZG93XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gQWJyZSB2ZW50YW5hIHBvcHVwXHJcbiAgb3BlblBvcHVwKCkge1xyXG4gICAgc3VwZXIuX29wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy4jZm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIHRoaXMuI3VzZXJJbmZvLnNldFVzZXJJbmZvKCk7XHJcbiAgfVxyXG5cclxuICAvLyBUb21hIGxvcyBkYXRvcyBkZSBpbnB1dCBkZSBsYXMgdmVudGFuYXMgcG9wdXBzIHkgbG9zIGFsbWFjZW5hXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgaWYgKHRoaXMuX3BvcHVwV2luZG93ID09PSB0aGlzLiNwb3B1cFByb2ZpbGUpIHtcclxuICAgICAgdGhpcy5fcG9wdXBJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19pbnB1dF9uYW1lXCIpLnZhbHVlO1xyXG4gICAgICB0aGlzLl9wb3B1cElucHV0QWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIjcG9wdXBfX2lucHV0X2Fib3V0LW1lXCJcclxuICAgICAgKS52YWx1ZTtcclxuICAgICAgdGhpcy4jdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgICAgIHVzZXJOYW1lOiB0aGlzLl9wb3B1cElucHV0TmFtZSxcclxuICAgICAgICB1c2VySm9iOiB0aGlzLl9wb3B1cElucHV0QWJvdXRNZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fcG9wdXBXaW5kb3cgPT09IHRoaXMuI3BvcHVwTmV3UGxhY2UpIHtcclxuICAgICAgdGhpcy5fcG9wdXBJbnB1dE5ld1BsYWNlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNwb3B1cF9faW5wdXRfbmV3LXBsYWNlLXBpY1wiXHJcbiAgICAgICkudmFsdWU7XHJcbiAgICAgIHRoaXMuX3BvcHVwSW5wdXRuZXdQbGFjZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNwb3B1cF9faW5wdXRfbmV3LXBsYWNlLXRpdGxlXCJcclxuICAgICAgKS52YWx1ZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLl9wb3B1cFdpbmRvdyA9PT0gdGhpcy4jcG9wdXBQcm9maWxlUGljKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwSW5wdXRQcm9maWxlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNwb3B1cF9faW5wdXRfcHJvZmlsZS1waWNcIlxyXG4gICAgICApLnZhbHVlO1xyXG4gICAgICB0aGlzLl9wb3B1cElucHV0UHJvZmlsZVBpY0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNwb3B1cF9faW5wdXRfcHJvZmlsZS1waWMtZGVzY3JpcHRpb25cIlxyXG4gICAgICApLnZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWdyZWdhIGxvcyBldmVudExpc3RlbmVycyBkZSBzdWJtaXQgZGUgbGEgdmVudGFuYSBwb3B1cFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5fY2xvc2VQb3B1cCgpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX3BvcHVwV2luZG93ID09PSB0aGlzLiNwb3B1cE5ld1BsYWNlKSB7XHJcbiAgICAgICAgdGhpcy4jY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAgdGhpcy5fcG9wdXBJbnB1dG5ld1BsYWNlVGl0bGUsXHJcbiAgICAgICAgICB0aGlzLl9wb3B1cElucHV0TmV3UGxhY2VQaWMsXHJcbiAgICAgICAgICBjYXJkc1RlbXBsYXRlXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLiNjYXJkLmFkZENhcmQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuX3BvcHVwV2luZG93ID09PSB0aGlzLiNwb3B1cFByb2ZpbGUpIHtcclxuICAgICAgICBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuICAgICAgICBjb25zdCBwcm9maWxlQWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXQtbWVcIik7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB0aGlzLiN1c2VySW5mby5fdXNlck5hbWU7XHJcbiAgICAgICAgcHJvZmlsZUFib3V0TWUudGV4dENvbnRlbnQgPSB0aGlzLiN1c2VySW5mby5fdXNlckpvYjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuX3BvcHVwV2luZG93ID09PSB0aGlzLiNwb3B1cFByb2ZpbGVQaWMpIHtcclxuICAgICAgICBjb25zdCBwcm9maWxlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWNcIik7XHJcbiAgICAgICAgcHJvZmlsZVBpYy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fcG9wdXBJbnB1dFByb2ZpbGVQaWN9KWA7XHJcbiAgICAgICAgcHJvZmlsZVBpYy5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcImFsdFwiLFxyXG4gICAgICAgICAgYCR7dGhpcy5fcG9wdXBJbnB1dFByb2ZpbGVQaWNEZXNjcmlwdGlvbn1gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIENpZXJyYSB2ZW50YW5hIHBvcHVwXHJcbiAgX2Nsb3NlUG9wdXAoKSB7XHJcbiAgICBzdXBlci5fY2xvc2VQb3B1cCgpO1xyXG4gICAgaWYgKHRoaXMuX3BvcHVwV2luZG93ID09PSB0aGlzLiNwb3B1cFByb2ZpbGUpIHJldHVybjtcclxuICAgIHRoaXMuX3BvcHVwV2luZG93XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxyXG4gICAgICAuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vc2NyaXB0cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybXMsIGNhcmRzVGVtcGxhdGUgfSBmcm9tIFwiLi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJDZW5vdGVzXCIsXHJcbiAgICBsaW5rOiBcIi4vaW1hZ2VzL2NhcmRzXzEuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlVzaHVhaWFcIixcclxuICAgIGxpbms6IFwiLi9pbWFnZXMvY2FyZHNfMi5qcGVnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIklndWF6w7pcIixcclxuICAgIGxpbms6IFwiLi9pbWFnZXMvY2FyZHNfMy5qcGVnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlV5dW5pXCIsXHJcbiAgICBsaW5rOiBcIi4vaW1hZ2VzL2NhcmRzXzQuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhY2FsYXJcIixcclxuICAgIGxpbms6IFwiLi9pbWFnZXMvY2FyZHNfNS53ZWJwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhcyBDb2xvcmFkYXNcIixcclxuICAgIGxpbms6IFwiLi9pbWFnZXMvY2FyZHNfNi5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gQ3JlYWNpw7NuIGRlIGxvcyBvYmpldG9zIGRlIGNhZGEgY2xhc2VcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCk7XHJcbmNvbnN0IHBvcHVwTmV3UGxhY2UgPSBuZXcgUG9wdXBXaXRoRm9ybXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcGxhY2VcIikpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGVQaWMgPSBuZXcgUG9wdXBXaXRoRm9ybXMoXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY1wiKVxyXG4pO1xyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybXMoXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGVcIilcclxuKTtcclxuXHJcbi8vIEFncmVnYXIgZXZlbnRMaXN0ZW5lcnMgYSBsb3MgYm90b25lcyBxdWUgYWJyZW4gY2FkYSB2ZW50YW5hIHBvcHVwXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIHBvcHVwTmV3UGxhY2Uub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBwb3B1cFByb2ZpbGVQaWMub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuLy9JbmljaW8gY29uIDYgdGFyamV0YXNcclxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24gKGluaXRpYWxDYXJkKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGluaXRpYWxDYXJkLm5hbWUsIGluaXRpYWxDYXJkLmxpbmssIGNhcmRzVGVtcGxhdGUpO1xyXG4gIGNhcmQuYWRkQ2FyZCgpO1xyXG59KTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU2VjdGlvbiIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwicHJlcGVuZCIsIkNhcmQiLCJuYW1lVmFsdWUiLCJsaW5rVmFsdWUiLCJ0ZW1wbGF0ZSIsIl9uYW1lVmFsdWUiLCJfbGlua1ZhbHVlIiwiX2NhcmQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBXaXRoSW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwibmV3Q2FyZFNlY3Rpb24iLCJfbmV3Q2FyZCIsImNsb25lTm9kZSIsInRleHRDb250ZW50IiwiYWx0Iiwic3JjIiwiX3RvZ2dsZUxpa2VCdG4iLCJfZXJhc2VDYXJkIiwiYmluZCIsImRvY3VtZW50IiwicmVuZGVySXRlbSIsImFkZEl0ZW0iLCJhZGRFdmVudExpc3RlbmVyIiwibGlrZUJ1dHRvbiIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRyYXNoQnRuIiwiY2xvc2VzdCIsInJlbW92ZSIsIlBvcHVwIiwicG9wdXBXaW5kb3ciLCJfcG9wdXBXaW5kb3ciLCJhZGQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJlc2NhcGVDbG9zZVBvcHVwIiwiZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VQb3B1cCIsInBvcHVwUGljIiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWciLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnT2JqIiwiZm9ybUVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXJyb3JDbGFzcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZW5hYmxlVmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZVNhdmVCdXR0b25TdGF0ZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIm5hbWUiLCJqb2IiLCJpbnB1dFByb2ZpbGVOYW1lIiwiaW5wdXRQcm9maWxlQWJvdXRNZSIsInZhbHVlIiwiY2FyZHNUZW1wbGF0ZSIsImNvbnRlbnQiLCJQb3B1cFdpdGhGb3JtcyIsInJlc2V0VmFsaWRhdGlvbiIsInNldFVzZXJJbmZvIiwiX3BvcHVwSW5wdXROYW1lIiwiX3BvcHVwSW5wdXRBYm91dE1lIiwiX3BvcHVwSW5wdXROZXdQbGFjZVBpYyIsIl9wb3B1cElucHV0bmV3UGxhY2VUaXRsZSIsIl9wb3B1cElucHV0UHJvZmlsZVBpYyIsIl9wb3B1cElucHV0UHJvZmlsZVBpY0Rlc2NyaXB0aW9uIiwiX2dldElucHV0VmFsdWVzIiwiYWRkQ2FyZCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0TWUiLCJwcm9maWxlUGljIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwb3B1cE5ld1BsYWNlIiwicG9wdXBQcm9maWxlUGljIiwicG9wdXBQcm9maWxlIiwib3BlblBvcHVwIiwibGluayIsImluaXRpYWxDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==